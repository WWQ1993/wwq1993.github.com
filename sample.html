<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width">
    <meta name="format-detection" content="telephone=no,email=no,address=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="中华英才网">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>中华英才网</title>

</head>
<body>


<script src="js/zepto.min.js"></script>
<script>

    !function setImgCarousel(imgUrlArr, parentSeletor,margin) {   //传入图片数组、插入节点位置
        var jsStr = '<div class="W_carousel"><a href="" class="leftArea"></a><div class="main"><div class="silk"></div></div><a href="" class="rightArea"></a></div>'
        $('head').append($('<style>.W_carousel{width:100%;height:15rem;}.W_carousel .main{width:60%;height:100%;margin:auto;position:relative;overflow:hidden;background-color:white;}.W_carousel .main .silk{white-space:nowrap;height:100%;position:absolute;padding-bottom:0rem;overflow:auto;left:0;}.W_carousel .silk img{margin:0 '+margin+';height:100%;display:inline-block;}</style>'))
        $(parentSeletor).append($(jsStr));

        var component = {
            main: $('.W_carousel .main'),
            silk: $('.W_carousel .main .silk')
        };

        var i = 0,
                str = '';
        for (; i < imgUrlArr.length; i++) {
            str += '<img src=' + imgUrlArr[i] + '>'
        }
        component.silk.append($(str));

        var imgs = $('.W_carousel .silk img'),
                startX = 0,
                currentX = 0,
                changeX = 0,
                silkStartLeft = 0,
                silkWidth = 0,
                windowWidth = 0,
                imgWidth =0

        imgs.each(function () {
            $(this).width(component.main.width())
        })
        setTimeout(function () {
            silkWidth = component.silk.width();
            windowWidth = $(window).width(),
                    imgWidth = imgs.width()
        }, 10);
        component.silk.bind('touchstart', function (e) {
            e.preventDefault();
            startX = e.touches[0].clientX;
            silkStartLeft = parseFloat($(this).css('left'));
        });
        component.silk.bind('touchmove', function (e) {
            e.preventDefault();
            var left;
            currentX = e.touches[0].clientX;
            changeX = startX - currentX;
            left = silkStartLeft - changeX

            if (left > windowWidth/5) {
                left = windowWidth/5;
            }
            else if (left < -(silkWidth-imgWidth+  windowWidth/5)) {
                left = -(silkWidth-imgWidth +  windowWidth/5)
            }
            $(this).css('left', left);
        });

        component.silk.bind('touchend', function (e) {
            e.preventDefault();
            var arr = [],
                    minValue = 0,
                    minVal = {
                        index: 0,
                        val: Infinity
                    },
                    mainOffsetLeft = component.main.offset().left;
            changeX = 0;
            startX = 0;
            //设置弹性效果
            imgs.each(function (index) {
                var distanceAbs = Math.abs($(this).offset().left - mainOffsetLeft);
                if (distanceAbs < minVal.val) {
                    minVal.index = index;
                    minVal.val = distanceAbs;
                }
            });
            component.silk.animate({'left': parseFloat(component.silk.css('left')) - (imgs.eq(minVal.index).offset().left - mainOffsetLeft)}, 200);

        });
        component.silk.trigger('touchend');
    }(["img/4.jpg", "img/5.jpg", "img/6.jpg"], 'body','1rem');

</script>
</body>
</html>